<head>
<meta name="pdfkit-orientation" content="Landscape"/>
<!-- <link rel="stylesheet" type="text/css" href="print.css" media="print"> -->
</head>

<% counter = 0 %>
	<% if @estimation.present? %>
		<% @estimation.each_with_index do |estimation , index| %>

	<% if index == 1 %>
	  <div></div>
	<% else %>
	  <div style="page-break-before: always;"> 	
	<% end %>

	<table class="text-left" width="100%">
		<%# @estimation.each do |estimation| %>
		<tr>
			<th width="50%" align="left">Client: <%= estimation.project.client.name rescue'-'%></th>
			<th width="50%" align="left">Drawing No:</th>
		</tr>
		<tr>
			<th width="50%" align="left">Title: <%= estimation.title rescue'-' %></th>
			<th width="50%" align="left">Date: <%= estimation.date rescue'-'%></th>
		</tr>
		<tr>
			<th width="50%" align="left">Dimension: <%= estimation.dimension rescue'-' %></th>
			<th width="50%" align="left">Issued by:</th>
		</tr>
		<tr>
			<th width="50%" align="left"></th>
			<th width="50%" align="left">Weight: <%#= two_precision(weight.sum) %>Ton(s)</th>
		</tr>	
	</table>

	<table class="black-line-table">
		<thead>
			<%= render "estimation_table" %>	
		</thead>
		<tbody>
			<% @remark_index = 0 %>
			<% estimation.estimation_item.each_with_index do |item_list , index| %>
			<% @remark_index = index %>
			<% counter += 1 %>
			<% if counter < 6 %>
			<tr>
					<td><%= index + 1 %></td>
					<td><%= item_list.part_detail %></td>
					<td><%#= item_list.material.name %></td>
					<td><%= item_list.thk_dia %></td>
					<td><%= item_list.dimension_h %></td>
					<td><%= item_list.dimension_w %></td>
					<td><%= item_list.dimension_l %></td>
					<td><%= item_list.wt_ibs_ft %></td>
					<td><%= item_list.qty %></td>
					<td><%= item_list.uom %></td>
					<td>
			        </td>	
					<td><%#= item_list. %></td>
					<td><%#= item_list. %></td>	
					<td><%#= estimation_remarks[index] %>
						<%= my_helper(estimation)[index] %></td>
			</tr>
		</tbody>
	<% else %>

	<div style="page-break-before: always;"> 

		<table class="text-left" width="100%">
			<%# @estimation.each do |estimation| %>

			<tr>
				<th width="50%" align="left">Client: <%= estimation.client.name rescue'-'%></th>
				<th width="50%" align="left">Drawing No:</th>
			</tr>
			<tr>
				<th width="50%" align="left">Title: <%= estimation.title rescue'-' %></th>
				<th width="50%" align="left">Date: <%= estimation.date rescue'-'%></th>
			</tr>
			<tr>
				<th width="50%" align="left">Dimension: <%= estimation.dimension rescue'-' %></th>
				<th width="50%" align="left">Issued by:</th>
			</tr>
			<tr>
				<th width="50%" align="left"></th>
				<th width="50%" align="left">Weight: <%#= two_precision(weight.sum) %>Ton(s)</th>
			</tr>	
		</table>
		<table class="black-line-table">
			<thead>
				<%= render "estimation_table" %>
			</thead>
		<tbody>
			<tr>
				<td><%= index + 1 %></td>
				<td><%= item_list.part_detail %></td>
				<td><%#= item_list.material.name %></td>
				<td><%= item_list.thk_dia %></td>
				<td><%= item_list.dimension_h %></td>
				<td><%= item_list.dimension_w %></td>
				<td><%= item_list.dimension_l %></td>
				<td><%= item_list.wt_ibs_ft %></td>
				<td><%= item_list.qty %></td>
				<td><%= item_list.uom %></td>
				<td>
		        </td>	
				<td><%#= item_list. %></td>
				<td><%#= item_list. %></td>	
				<td><%#= estimation_remarks[index] %>
					<%= my_helper(estimation)[index] %></td>
			</tr>
		</tbody>		
		<% counter = 1 %>

		<% end %> <!-- counter -->	
	<% end %> <!-- second each do -->
		<tr>
			<td colspan="9"></td>
			<td>Total:</td>
			<td></td>
			<td colspan="3"></td>
		</tr>	
	</table>
	</div> <!-- page break counter -->
</div> <!-- first page break-->

<% end %>

<% else %>
no record found
<% end %>


<style>

  table{
    width:100%;
  }
  
  body {
    width:100%;
    background-color: white;
    color: #333;
    font-family: "Courier New", Courier, monospace;
    font-size: 11px;
    line-height: 18px; 
    
  }

  p, div { margin: 0; }

  p, ol, ul, td {
    font-family: "Courier New", Courier, monospace;
    font-size: 11px; }

    table.black-line-table {
      border-width: 1px;
      <%#*border-spacing: 0px;%>
      border-style: none;
      border-color: black;
      border-collapse: collapse;
      background-color: transparent; }

  table.black-line-table thead th {
  		border-style:solid;
		border-width:3px;
        padding: 1px;
        border-style: solid;
        border-color: black;
        background-color: transparent; }

  table.black-line-table tbody td {
  		border-style:solid;
        border-width: 0px;
        padding: 1px;
        border-style: solid;
        border-color: black;

        }
  tbody tr {
    border-top:2pt solid white;
 }
</style>
